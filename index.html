<!DOCTYPE html>
<html lang="en">
<meta http-equiv="Access-Control-Allow-Origin" content="*">.
<head>
    <meta charset="UTF-8">
    <title>Sender</title>
</head>
<body>
<H1>Monitor</H1>
<input type="button" value="start" onclick="start()">
<input type="button" value="stop" onclick="stop()">
<input type="button" value="refresh" onclick="refresh()">
<br><br>
    <div id="vm1">
        <h2>VM 1</h2>
        <div id="vmStatus1">Status: idle</div>
        <div id="vmCount1">Count: 0</div>
    </div>
    <div id="vm2">
        <h2>VM 2</h2>
        <div id="vmStatus2">Status: idle</div>
        <div id="vmCount2">Count: 0</div>
    </div>
    <div id="vm3">
        <h2>VM 3</h2>
        <div id="vmStatus3">Status: idle</div>
        <div id="vmCount3">Count: 0</div>
    </div>
    <div id="vm4">
        <h2>VM 4</h2>
        <div id="vmStatus4">Status: idle</div>
        <div id="vmCount4">Count: 0</div>
    </div>
    <div id="vm5">
        <h2>VM 5</h2>
        <div id="vmStatus5">Status: idle</div>
        <div id="vmCount5">Count: 0</div>
    </div>
    <div id="vm6">
        <h2>VM 6</h2>
        <div id="vmStatus6">Status: idle</div>
        <div id="vmCount6">Count: 0</div>
    </div>
    <div id="vm7">
        <h2>VM 7</h2>
        <div id="vmStatus7">Status: idle</div>
        <div id="vmCount7">Count: 0</div>
    </div>
    <div id="vm8">
        <h2>VM 8</h2>
        <div id="vmStatus8">Status: idle</div>
        <div id="vmCount8">Count: 0</div>
    </div>
<script src="https://code.jquery.com/jquery-2.2.0.min.js"></script>
<script>
	var vms = [
//		"https://comp6905a3-snickdx.c9users.io"
        "localhost:3000"
	];

	function get(url, id, html){
		var settings = {
			"async": true,
			"crossDomain": true,
			"url": url,
			"method": "GET",
			"headers": {
				"cache-control": "no-cache",
				"postman-token": "d3330553-2ca0-b043-3547-0f05300821a5"
			}
		};
		$.get( settings).done(function( data ) {
			$( id ).html(html+data+"</h2>");
		});
    }

	function refresh(){
		vms.forEach(function(vm, index){
			get(vms+"/getCount", "#vmCount"+index, "<h2> Count: ");
		});
	}

	function start(){
		vms.forEach(function(vm, index){
			get(vms+"/start", "#vmStatus"+index, "<h2> Status: ");
		});
	}

	function stop(){
		vms.forEach(function(vm, index){
			get(vms+"/start", "#vmStatus"+index, "<h2> Status: ");
		});
	}
</script>
</body>
</html>